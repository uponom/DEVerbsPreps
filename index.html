<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="/DEVerbsPreps/manifest.json">
  <title>Deutsch Verben mit Pr√§positionen</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }

    .lang-switcher {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 10px;
    }

    .lang-switcher button {
      padding: 6px 10px;
      margin-left: 5px;
      font-size: 10px;
      cursor: pointer;
      border-radius: 8px;
    }

    .translation {
      color: #555;
      font-style: italic;
      font-size: 20px;
      margin-bottom: 5px;
    }

    .verb-display {
      font-size: 24px;
      margin: 10px 0 15px;
      font-weight: bold;
    }

    .verb-display .sich {
      color: #777;
    }

    button {
      margin: 5px;
      padding: 10px 16px;
      font-size: 24px;
      cursor: pointer;
      border-radius: 10px;
    }

    #options {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 18px;
    }

    .correct-answer {
      font-size: 24px;
    }

    #nextButton {
      display: none;
      margin-top: 10px;
    }

    .progress-container {
      margin-top: 30px;
    }

    .progress-text {
      font-size: 16px;
      margin-bottom: 5px;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background-color: #b22222;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: green;
      width: 0%;
      transition: width 0.3s;
    }

    .example-text {
      font-style: italic;
      color: #888;
      font-size: 20px;
      margin-bottom: 8px;
    }

    @media (max-width: 600px) {
      body {
        padding: 10px;
      }
      .translation {
        font-size: 28px;
      }
      .verb-display {
        font-size: 32px;
      }
      button {
        font-size: 32px;
        padding: 8px 10px;
      }
      .lang-switcher button {
        font-size: 16px;
        padding: 8px 10px;
      }
      #result {
        font-size: 26px;
      }
      .correct-answer {
        font-size: 30px;
      }
    }
  </style>
</head>
<body>

    <div id="congratsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.6); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:30px; border-radius:12px; text-align:center; max-width:90%;">
        <h2>üéâ Gl√ºckwunsch! Du hast den Test abgeschlossen!</h2>
        <button onclick="restartTest()" style="margin-top:20px; font-size:20px; padding:10px 20px; border-radius:8px;">üîÅ Test erneut starten</button>
    </div>
    </div>

  <div class="lang-switcher">
    <button onclick="setLanguage('en')">EN</button>
    <button onclick="setLanguage('ua')">UA</button>
    <button onclick="setLanguage('ru')">RU</button>
  </div>

  <div class="translation" id="translation"></div>
  <div class="verb-display" id="verb"></div>
  <div id="options"></div>
  <p id="result"></p>
  <button id="nextButton" onclick="newQuestion()">‚û°Ô∏è</button>

  <div id="example" class="example-text"></div>

  <div class="progress-container">
    <div class="progress-text" id="progressText"></div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
  </div>
  <div id="penaltyPoints" style="margin-top:5px; font-size:14px; color:#666;">Strafpunkte: 0</div>

  <script>
    // Data for verbs with prepositions
    // Each verb has a probability weight for random selection
    const data = [
      // Akkusativ
      { verb: "achten", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞", en: "to pay attention", ua: "–∑–≤–µ—Ä—Ç–∞—Ç–∏ —É–≤–∞–≥—É –Ω–∞" }, example: "Du solltest auf die Regeln achten." },
      { verb: "antworten", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞", en: "to answer to", ua: "–≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞" }, example: "Ich antworte auf deine Frage." },
      { verb: "sich √§rgern", correct: "√ºber", case: "Akkusativ", probability: 7, translations: { ru: "–∑–ª–∏—Ç—å—Å—è –Ω–∞", en: "to be annoyed about", ua: "–∑–ª–∏—Ç–∏—Å—è –Ω–∞" }, example: "Er √§rgert sich √ºber das schlechte Wetter." },
      { verb: "sich aufregen", correct: "√ºber", case: "Akkusativ", probability: 7, translations: { ru: "–≤–æ–ª–Ω–æ–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞", en: "to get upset about", ua: "—Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑" }, example: "Sie regt sich √ºber den L√§rm auf." },
      { verb: "sich bedanken", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –∑–∞", en: "to thank for", ua: "–¥—è–∫—É–≤–∞—Ç–∏ –∑–∞" }, example: "Ich bedanke mich f√ºr das Geschenk." },
      { verb: "beschr√§nken", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —á–µ–º-—Ç–æ", en: "to limit to", ua: "–æ–±–º–µ–∂—É–≤–∞—Ç–∏ —á–∏–º–æ—Å—å" }, example: "Wir beschr√§nken uns auf das Wichtigste." },
      { verb: "sich beschweren", correct: "√ºber", case: "Akkusativ", probability: 7, translations: { ru: "–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞", en: "to complain about", ua: "—Å–∫–∞—Ä–∂–∏—Ç–∏—Å—è –Ω–∞" }, example: "Er beschwert sich √ºber das Essen." },
      { verb: "bitten", correct: "um", case: "Akkusativ", probability: 7, translations: { ru: "–ø—Ä–æ—Å–∏—Ç—å –æ", en: "to ask for", ua: "–ø—Ä–æ—Å–∏—Ç–∏ –ø—Ä–æ" }, example: "Ich bitte um Hilfe." },
      { verb: "denken", correct: "an", case: "Akkusativ", probability: 7, translations: { ru: "–¥—É–º–∞—Ç—å –æ", en: "to think about", ua: "–¥—É–º–∞—Ç–∏ –ø—Ä–æ" }, example: "Sie denkt an ihre Familie." },
      { verb: "durchsetzen", correct: "gegen", case: "Akkusativ", probability: 7, translations: { ru: "–ø—Ä–æ–±–∏–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑", en: "to push through against", ua: "–ø—Ä–æ–±–∏–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑" }, example: "Er setzt sich gegen die Konkurrenz durch." },
      { verb: "sich eignen", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–ø–æ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è", en: "to be suitable for", ua: "–ø—ñ–¥—Ö–æ–¥–∏—Ç–∏ –¥–ª—è" }, example: "Das Buch eignet sich f√ºr Anf√§nger." },
      { verb: "einbringen", correct: "in", case: "Akkusativ", probability: 7, translations: { ru: "–≤–Ω–æ—Å–∏—Ç—å –≤", en: "to bring into", ua: "–≤–Ω–æ—Å–∏—Ç–∏ –≤" }, example: "Er bringt neue Ideen in das Projekt ein." },
      { verb: "eingehen", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–≤–Ω–∏–∫–∞—Ç—å –≤", en: "to go into", ua: "–∑–∞–≥–ª–∏–±–ª—é–≤–∞—Ç–∏—Å—è –≤" }, example: "Sie geht auf die Frage ein." },
      { verb: "einsetzen", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è", en: "to use for", ua: "–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è" }, example: "Wir setzen die Mittel f√ºr das Projekt ein." },
      { verb: "sich einsetzen", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–∑–∞—Å—Ç—É–ø–∞—Ç—å—Å—è –∑–∞", en: "to stand up for", ua: "–∑–∞—Å—Ç—É–ø–∞—Ç–∏—Å—è –∑–∞" }, example: "Sie setzt sich f√ºr die Umwelt ein." },
      { verb: "einziehen", correct: "in", case: "Akkusativ", probability: 7, translations: { ru: "–≤—ä–µ–∑–∂–∞—Ç—å –≤", en: "to move into", ua: "–≤‚Äô—ó–∂–¥–∂–∞—Ç–∏ –≤" }, example: "Wir ziehen in eine neue Wohnung ein." },
      { verb: "sich engagieren", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–∞–∫—Ç–∏–≤–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤", en: "to get involved in", ua: "–∞–∫—Ç–∏–≤–Ω–æ –±—Ä–∞—Ç–∏ —É—á–∞—Å—Ç—å —É" }, example: "Er engagiert sich f√ºr soziale Projekte." },
      { verb: "sich entscheiden", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "—Ä–µ—à–∏—Ç—å—Å—è –Ω–∞", en: "to decide on", ua: "–≤–∏—Ä—ñ—à–∏—Ç–∏ —â–æ–¥–æ" }, example: "Ich entscheide mich f√ºr das blaue Hemd." },
      { verb: "sich entschuldigen", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–∏–∑–≤–∏–Ω—è—Ç—å—Å—è –∑–∞", en: "to apologize for", ua: "–≤–∏–±–∞—á–∞—Ç–∏—Å—è –∑–∞" }, example: "Er entschuldigt sich f√ºr den Fehler." },
      { verb: "sich erinnern", correct: "an", case: "Akkusativ", probability: 7, translations: { ru: "–≤—Å–ø–æ–º–∏–Ω–∞—Ç—å –æ", en: "to remember", ua: "–ø–∞–º‚Äô—è—Ç–∞—Ç–∏ –ø—Ä–æ" }, example: "Sie erinnert sich an die Reise." },
      { verb: "sich freuen", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è (–ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º—É)", en: "to look forward to", ua: "—Ä–∞–¥—ñ—Ç–∏ (–º–∞–π–±—É—Ç–Ω—å–æ–º—É)" }, example: "Ich freue mich auf den Urlaub." },
      { verb: "halten", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "—Å—á–∏—Ç–∞—Ç—å –∫–æ–≥–æ-—Ç–æ –∫–µ–º-—Ç–æ", en: "to consider as", ua: "–≤–≤–∞–∂–∞—Ç–∏ –∫–æ–≥–æ—Å—å –∫–∏–º–æ—Å—å" }, example: "Er h√§lt sie f√ºr sehr klug." },
      { verb: "hinweisen", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "—É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞", en: "to point out", ua: "–≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞" }, example: "Der Lehrer weist auf den Fehler hin." },
      { verb: "sich gew√∂hnen", correct: "an", case: "Akkusativ", probability: 7, translations: { ru: "–ø—Ä–∏–≤—ã–∫–∞—Ç—å –∫", en: "to get used to", ua: "–∑–≤–∏–∫–∞—Ç–∏ –¥–æ" }, example: "Ich gew√∂hne mich an das neue Klima." },
      { verb: "informieren", correct: "√ºber", case: "Akkusativ", probability: 7, translations: { ru: "–∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ", en: "to inform about", ua: "—ñ–Ω—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –ø—Ä–æ" }, example: "Wir informieren Sie √ºber die √Ñnderungen." },
      { verb: "sich interessieren", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å—Å—è", en: "to be interested in", ua: "—Ü—ñ–∫–∞–≤–∏—Ç–∏—Å—è" }, example: "Er interessiert sich f√ºr Musik." },
      { verb: "sich konzentrieren", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞", en: "to concentrate on", ua: "–∑–æ—Å–µ—Ä–µ–¥–∂—É–≤–∞—Ç–∏—Å—è –Ω–∞" }, example: "Sie konzentriert sich auf die Arbeit." },
      { verb: "sich k√ºmmern", correct: "um", case: "Akkusativ", probability: 7, translations: { ru: "–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ", en: "to take care of", ua: "–¥–±–∞—Ç–∏ –ø—Ä–æ" }, example: "Ich k√ºmmere mich um die Kinder." },
      { verb: "reden", correct: "√ºber", case: "Akkusativ", probability: 7, translations: { ru: "–≥–æ–≤–æ—Ä–∏—Ç—å –æ", en: "to talk about", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ" }, example: "Wir reden √ºber das Problem." },
      { verb: "reichen", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "—Ö–≤–∞—Ç–∞—Ç—å –¥–ª—è", en: "to be enough for", ua: "–≤–∏—Å—Ç–∞—á–∞—Ç–∏ –¥–ª—è" }, example: "Das Geld reicht f√ºr das Essen." },
      { verb: "sorgen", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ", en: "to care for", ua: "–ø—ñ–∫–ª—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ" }, example: "Sie sorgt f√ºr ihre Familie." },
      { verb: "sprechen", correct: "√ºber", case: "Akkusativ", probability: 7, translations: { ru: "–≥–æ–≤–æ—Ä–∏—Ç—å –æ", en: "to speak about", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ" }, example: "Wir sprechen √ºber das Wetter." },
      { verb: "sich verlassen", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞", en: "to rely on", ua: "–ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞" }, example: "Ich verlasse mich auf dich." },
      { verb: "sich verpflichten", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–æ–±—è–∑—ã–≤–∞—Ç—å—Å—è –Ω–∞", en: "to commit to", ua: "–∑–æ–±–æ–≤‚Äô—è–∑—É–≤–∞—Ç–∏—Å—è –Ω–∞" }, example: "Er verpflichtet sich f√ºr das Projekt." },
      { verb: "verzichten", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –æ—Ç", en: "to do without", ua: "–≤—ñ–¥–º–æ–≤–ª—è—Ç–∏—Å—è –≤—ñ–¥" }, example: "Sie verzichtet auf Zucker." },
      { verb: "sich vorbereiten", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫", en: "to prepare for", ua: "–≥–æ—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ" }, example: "Ich bereite mich auf die Pr√ºfung vor." },
      { verb: "warten", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–∂–¥–∞—Ç—å", en: "to wait for", ua: "—á–µ–∫–∞—Ç–∏" }, example: "Wir warten auf den Bus." },
      { verb: "sich wenden", correct: "an", case: "Akkusativ", probability: 7, translations: { ru: "–æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫", en: "to turn to", ua: "–∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –¥–æ" }, example: "Sie wendet sich an den Lehrer." },
      { verb: "sich wundern", correct: "√ºber", case: "Akkusativ", probability: 7, translations: { ru: "—É–¥–∏–≤–ª—è—Ç—å—Å—è", en: "to be surprised about", ua: "–¥–∏–≤—É–≤–∞—Ç–∏—Å—è" }, example: "Er wundert sich √ºber die Nachricht." },
      { verb: "sich Zeit nehmen", correct: "f√ºr", case: "Akkusativ", probability: 7, translations: { ru: "–≤—ã–¥–µ–ª—è—Ç—å –≤—Ä–µ–º—è –¥–ª—è", en: "to take time for", ua: "–ø—Ä–∏–¥—ñ–ª—è—Ç–∏ —á–∞—Å –¥–ª—è" }, example: "Ich nehme mir Zeit f√ºr meine Freunde." },
      { verb: "zutreffen", correct: "auf", case: "Akkusativ", probability: 7, translations: { ru: "–æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫", en: "to apply to", ua: "—Å—Ç–æ—Å—É–≤–∞—Ç–∏—Å—è –¥–æ" }, example: "Das trifft auf viele Menschen zu." },

      // Dativ
      { verb: "abh√§ngen", correct: "von", case: "Dativ", probability: 7, translations: { ru: "–∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç", en: "to depend on", ua: "–∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥" }, example: "Alles h√§ngt von dir ab." },
      { verb: "sich abstimmen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "—Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—Ç—å—Å—è —Å", en: "to coordinate with", ua: "—É–∑–≥–æ–¥–∂—É–≤–∞—Ç–∏ –∑" }, example: "Ich stimme mich mit meinem Kollegen ab." },
      { verb: "anmelden", correct: "bei", case: "Dativ", probability: 7, translations: { ru: "—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —É/–≤", en: "to register at/with", ua: "—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è —É/–≤" }, example: "Ich melde mich bei der Universit√§t an." },
      { verb: "sich auskennen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "—Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤", en: "to be familiar with", ua: "—Ä–æ–∑–±–∏—Ä–∞—Ç–∏—Å—è –≤" }, example: "Er kennt sich gut mit Computern aus." },
      { verb: "sich bedanken", correct: "bei", case: "Dativ", probability: 7, translations: { ru: "–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –∫–æ–≥–æ-—Ç–æ", en: "to thank someone", ua: "–¥—è–∫—É–≤–∞—Ç–∏ –∫–æ–º—É—Å—å" }, example: "Ich bedanke mich bei dir." },
      { verb: "befreien", correct: "von", case: "Dativ", probability: 7, translations: { ru: "–æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –æ—Ç", en: "to free from", ua: "–∑–≤—ñ–ª—å–Ω—è—Ç–∏ –≤—ñ–¥" }, example: "Sie befreit ihn von der Angst." },
      { verb: "beginnen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–Ω–∞—á–∏–Ω–∞—Ç—å —Å", en: "to begin with", ua: "–ø–æ—á–∏–Ω–∞—Ç–∏ –∑" }, example: "Wir beginnen mit der Arbeit." },
      { verb: "berichten", correct: "von", case: "Dativ", probability: 7, translations: { ru: "–¥–æ–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ", en: "to report on", ua: "–¥–æ–ø–æ–≤—ñ–¥–∞—Ç–∏ –ø—Ä–æ" }, example: "Er berichtet von seinen Erfahrungen." },
      { verb: "sich besch√§ftigen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–∑–∞–Ω–∏–º–∞—Ç—å—Å—è —á–µ–º-—Ç–æ", en: "to be busy with", ua: "–∑–∞–π–º–∞—Ç–∏—Å—è —á–∏–º–æ—Å—å" }, example: "Ich besch√§ftige mich mit Musik." },
      { verb: "bestehen", correct: "aus", case: "Dativ", probability: 7, translations: { ru: "—Å–æ—Å—Ç–æ—è—Ç—å –∏–∑", en: "to consist of", ua: "—Å–∫–ª–∞–¥–∞—Ç–∏—Å—è –∑" }, example: "Das Team besteht aus f√ºnf Personen." },
      { verb: "chatten", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å—Å—è —Å", en: "to chat with", ua: "—Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑" }, example: "Ich chatte oft mit meinen Freunden." },
      { verb: "diskutieren", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–¥–∏—Å–∫—É—Ç–∏—Ä–æ–≤–∞—Ç—å —Å", en: "to discuss with", ua: "–¥–∏—Å–∫—É—Ç—É–≤–∞—Ç–∏ –∑" }, example: "Ich diskutiere mit meinem Lehrer." },
      { verb: "einladen", correct: "zu", case: "Dativ", probability: 7, translations: { ru: "–ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –Ω–∞", en: "to invite to", ua: "–∑–∞–ø—Ä–æ—à—É–≤–∞—Ç–∏ –Ω–∞" }, example: "Ich lade dich zu meiner Party ein." },
      { verb: "erfahren", correct: "von", case: "Dativ", probability: 7, translations: { ru: "—É–∑–Ω–∞—Ç—å –æ", en: "to learn about", ua: "–¥—ñ–∑–Ω–∞—Ç–∏—Å—è –ø—Ä–æ" }, example: "Ich habe von dem Unfall erfahren." },
      { verb: "sich erkundigen", correct: "nach", case: "Dativ", probability: 7, translations: { ru: "–æ—Å–≤–µ–¥–æ–º–ª—è—Ç—å—Å—è –æ", en: "to inquire about", ua: "–¥–æ–≤—ñ–¥—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ" }, example: "Ich erkundige mich nach dem Preis." },
      { verb: "sich entschuldigen", correct: "bei", case: "Dativ", probability: 7, translations: { ru: "–∏–∑–≤–∏–Ω—è—Ç—å—Å—è –ø–µ—Ä–µ–¥", en: "to apologize to", ua: "–≤–∏–±–∞—á–∞—Ç–∏—Å—è –ø–µ—Ä–µ–¥" }, example: "Ich entschuldige mich bei dir." },
      { verb: "erz√§hlen", correct: "von", case: "Dativ", probability: 7, translations: { ru: "—Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ", en: "to tell about", ua: "—Ä–æ–∑–ø–æ–≤—ñ–¥–∞—Ç–∏ –ø—Ä–æ" }, example: "Er erz√§hlt von seiner Reise." },
      { verb: "geh√∂ren", correct: "zu", case: "Dativ", probability: 7, translations: { ru: "–ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –∫", en: "to belong to", ua: "–Ω–∞–ª–µ–∂–∞—Ç–∏ –¥–æ" }, example: "Sie geh√∂rt zu meiner Familie." },
      { verb: "klarkommen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–ª–∞–¥–∏—Ç—å —Å", en: "to get along with", ua: "–ª–∞–¥–Ω–∞—Ç–∏ –∑" }, example: "Ich komme gut mit ihm klar." },
      { verb: "leiden", correct: "unter", case: "Dativ", probability: 7, translations: { ru: "—Å—Ç—Ä–∞–¥–∞—Ç—å –æ—Ç", en: "to suffer from", ua: "—Å—Ç—Ä–∞–∂–¥–∞—Ç–∏ –≤—ñ–¥" }, example: "Sie leidet unter Kopfschmerzen." },
      { verb: "reden", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Å", en: "to talk with", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –∑" }, example: "Ich rede mit meinem Freund." },
      { verb: "sprechen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–≥–æ–≤–æ—Ä–∏—Ç—å —Å", en: "to speak with", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –∑" }, example: "Ich spreche mit meiner Mutter." },
      { verb: "schuld sein", correct: "an", case: "Dativ", probability: 7, translations: { ru: "–±—ã—Ç—å –≤–∏–Ω–æ–≤–∞—Ç—ã–º –≤", en: "to be guilty of", ua: "–±—É—Ç–∏ –≤–∏–Ω–Ω–∏–º —É" }, example: "Er ist schuld an dem Unfall." },
      { verb: "sch√ºtzen", correct: "vor", case: "Dativ", probability: 7, translations: { ru: "–∑–∞—â–∏—â–∞—Ç—å –æ—Ç", en: "to protect from", ua: "–∑–∞—Ö–∏—â–∞—Ç–∏ –≤—ñ–¥" }, example: "Die Jacke sch√ºtzt vor K√§lte." },
      { verb: "streiten", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "—Å–ø–æ—Ä–∏—Ç—å —Å", en: "to argue with", ua: "—Å–≤–∞—Ä–∏—Ç–∏—Å—è –∑" }, example: "Ich streite oft mit meinem Bruder." },
      { verb: "teilnehmen", correct: "an", case: "Dativ", probability: 7, translations: { ru: "—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤", en: "to participate in", ua: "–±—Ä–∞—Ç–∏ —É—á–∞—Å—Ç—å —É" }, example: "Ich nehme an dem Kurs teil." },
      { verb: "telefonieren", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Å", en: "to call", ua: "—Ç–µ–ª–µ—Ñ–æ–Ω—É–≤–∞—Ç–∏ –∑" }, example: "Ich telefoniere mit meiner Schwester." },
      { verb: "tr√§umen", correct: "von", case: "Dativ", probability: 7, translations: { ru: "–º–µ—á—Ç–∞—Ç—å –æ", en: "to dream of", ua: "–º—Ä—ñ—è—Ç–∏ –ø—Ä–æ" }, example: "Ich tr√§ume von einem Haus am Meer." },
      { verb: "trennen", correct: "von", case: "Dativ", probability: 7, translations: { ru: "–æ—Ç–¥–µ–ª—è—Ç—å –æ—Ç", en: "to separate from", ua: "–≤—ñ–¥–æ–∫—Ä–µ–º–ª—é–≤–∞—Ç–∏ –≤—ñ–¥" }, example: "Sie trennt das Salz vom Wasser." },
      { verb: "sich treffen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è —Å", en: "to meet with", ua: "–∑—É—Å—Ç—Ä—ñ—á–∞—Ç–∏—Å—è –∑" }, example: "Ich treffe mich mit meinen Freunden." },
      { verb: "sich verabschieden", correct: "von", case: "Dativ", probability: 7, translations: { ru: "–ø—Ä–æ—â–∞—Ç—å—Å—è —Å", en: "to say goodbye to", ua: "–ø—Ä–æ—â–∞—Ç–∏—Å—è –∑" }, example: "Ich verabschiede mich von meinen Eltern." },
      { verb: "sich √ºberzeugen", correct: "von", case: "Dativ", probability: 7, translations: { ru: "—É–±–µ–¥–∏—Ç—å—Å—è –≤", en: "to be convinced of", ua: "–ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è –≤" }, example: "Ich habe mich von der Qualit√§t √ºberzeugt." },
      { verb: "umgehen", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å", en: "to deal with", ua: "–ø–æ–≤–æ–¥–∏—Ç–∏—Å—è –∑" }, example: "Er kann gut mit Stress umgehen." },
      { verb: "unterst√ºtzen", correct: "bei", case: "Dativ", probability: 7, translations: { ru: "–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤", en: "to support with", ua: "–ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —É" }, example: "Sie unterst√ºtzt mich bei den Hausaufgaben." },
      { verb: "sich unterhalten", correct: "mit", case: "Dativ", probability: 7, translations: { ru: "–±–µ—Å–µ–¥–æ–≤–∞—Ç—å —Å", en: "to have a conversation with", ua: "—Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑" }, example: "Ich unterhalte mich mit meinem Nachbarn." }
    ];

    const prepositions = [...new Set(data.map(item => item.correct))].sort();

    let currentLang = "en";
    let currentCorrect = "";
    let currentIndex = null;

    const nextButtonText = {
      ru: "‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π",
      en: "‚û°Ô∏è Next",
      ua: "‚û°Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∏–π"
    };

    const resultText = {
      ru: { correct: "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!", wrong: "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:" },
      en: { correct: "‚úÖ Correct!", wrong: "‚ùå Wrong! Correct answer:" },
      ua: { correct: "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!", wrong: "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:" }
    };

    function setLanguage(lang) {
      currentLang = lang;
      newQuestion();
    }

    function formatVerb(verb) {
      if (verb.startsWith("sich ")) {
        const parts = verb.split(" ");
        return `<span class="sich">${parts[0]}</span> ${parts.slice(1).join(" ")}`;
      }
      return verb;
    }

    function getWeightedRandomIndex() {
      const pool = [];
      data.forEach((item, index) => {
        for (let i = 0; i < item.probability; i++) {
          pool.push(index);
        }
      });
      return pool[Math.floor(Math.random() * pool.length)];
    }

    function newQuestion() {
      currentIndex = getWeightedRandomIndex();
      const item = data[currentIndex];
      const { verb, correct, translations, case: grammarCase, example } = item;

      currentCorrect = correct;
      document.getElementById("translation").innerHTML = `${translations[currentLang]} <span style="color:#999; font-size:16px;">(${grammarCase})</span>`;
      document.getElementById("verb").innerHTML = formatVerb(verb);
      document.getElementById("result").textContent = "";
      document.getElementById("nextButton").style.display = "none";
      document.getElementById("nextButton").textContent = nextButtonText[currentLang];

      // –£–ø—Ä–æ—â–µ–Ω–æ: –∑–∞–º–µ–Ω—è–µ–º –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–µ–¥–ª–æ–≥–∞ –Ω–∞ —Ç—Ä–æ–µ—Ç–æ—á–∏–µ
      if (example && correct) {
        const replaced = example.replace(new RegExp(`\\b${correct}\\b`, "g"), "...");
        document.getElementById("example").textContent = replaced;
      } else {
        document.getElementById("example").textContent = "";
      }

      const container = document.getElementById("options");
      container.innerHTML = "";

      prepositions.forEach((prep) => {
        const btn = document.createElement("button");
        btn.textContent = prep;
        btn.onclick = () => handleAnswer(prep);
        container.appendChild(btn);
      });
    }

    function handleAnswer(selected) {
      const container = document.getElementById("options");
      container.innerHTML = "";
      const result = document.getElementById("result");
      const correct = currentCorrect;
      const item = data[currentIndex];

      if (selected === correct) {
        result.textContent = resultText[currentLang].correct;
        if (item.probability > 2) item.probability -= 2;
      } else {
        result.innerHTML = `${resultText[currentLang].wrong} <span class="correct-answer">${correct}</span>`;
        if (item.probability < 39) item.probability += 4;
      }

      document.getElementById("verb").innerHTML = formatVerb(item.verb) + ` ${item.correct}`;
      document.getElementById("nextButton").style.display = "inline-block";
      // –î–æ–±–∞–≤–ª–µ–Ω–æ: –≤—ã–≤–æ–¥ –ø—Ä–∏–º–µ—Ä–∞
      document.getElementById("example").textContent = item.example ? item.example : "";
      updateProgress();
    }

    function updateProgress() {
        const total = data.length;
        const mastered = data.filter(item => item.probability === 1).length;
        const percent = Math.floor((mastered / total) * 100);
        document.getElementById("progressText").textContent = `üìä Progress: ${percent}%`;
        document.getElementById("progressFill").style.width = `${percent}%`;

        const totalPenalty = data.reduce((sum, item) => sum + (item.probability - 1), 0);
        const currentItem = data[currentIndex];
        const currentPenalty = currentItem ? currentItem.probability - 1 : 0;
        const currentVerb = currentItem ? currentItem.verb : "";

        document.getElementById("penaltyPoints").textContent =
            `${currentVerb} >>> Strafpunkte: ${currentPenalty} / Total Strafpunkte: ${totalPenalty}`;

        if (percent === 100) {
            document.getElementById("congratsModal").style.display = "flex";
        }
    }

    function restartTest() {
        data.forEach(item => item.probability = 4);
        document.getElementById("congratsModal").style.display = "none";
        updateProgress();
        newQuestion();
    }

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/DEVerbsPreps/service-worker.js', { scope: '/DEVerbsPreps/' })
          .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
      });
    }

    newQuestion();
    updateProgress();

  </script>
  <script>

  </script>
</body>
</html>
