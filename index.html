<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deutsch Verben mit Pr√§positionen</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }

    .lang-switcher {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 10px;
    }

    .lang-switcher button {
      padding: 6px 10px;
      margin-left: 5px;
      font-size: 10px;
      cursor: pointer;
      border-radius: 8px;
    }

    .translation {
      color: #555;
      font-style: italic;
      font-size: 20px;
      margin-bottom: 5px;
    }

    .verb-display {
      font-size: 24px;
      margin: 10px 0 15px;
      font-weight: bold;
    }

    .verb-display .sich {
      color: #777;
    }

    button {
      margin: 5px;
      padding: 10px 16px;
      font-size: 24px;
      cursor: pointer;
      border-radius: 10px;
    }

    #options {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 18px;
    }

    .correct-answer {
      font-size: 24px;
    }

    #nextButton {
      display: none;
      margin-top: 10px;
    }

    .progress-container {
      margin-top: 30px;
    }

    .progress-text {
      font-size: 16px;
      margin-bottom: 5px;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background-color: #b22222;
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: green;
      width: 0%;
      transition: width 0.3s;
    }

    @media (max-width: 600px) {
      body {
        padding: 10px;
      }
      .translation {
        font-size: 28px;
      }
      .verb-display {
        font-size: 32px;
      }
      button {
        font-size: 32px;
        padding: 14px 20px;
      }
      .lang-switcher button {
        font-size: 16px;
        padding: 14px 20px;
      }
      #result {
        font-size: 26px;
      }
      .correct-answer {
        font-size: 30px;
      }
    }
  </style>
</head>
<body>

    <div id="congratsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.6); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:30px; border-radius:12px; text-align:center; max-width:90%;">
        <h2>üéâ Gl√ºckwunsch! Du hast den Test abgeschlossen!</h2>
        <button onclick="restartTest()" style="margin-top:20px; font-size:20px; padding:10px 20px; border-radius:8px;">üîÅ Test erneut starten</button>
    </div>
    </div>

  <div class="lang-switcher">
    <button onclick="setLanguage('en')">EN</button>
    <button onclick="setLanguage('ua')">UA</button>
    <button onclick="setLanguage('ru')">RU</button>
  </div>

  <div class="translation" id="translation"></div>
  <div class="verb-display" id="verb"></div>
  <div id="options"></div>
  <p id="result"></p>
  <button id="nextButton" onclick="newQuestion()">‚û°Ô∏è</button>

  <div class="progress-container">
    <div class="progress-text" id="progressText"></div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
  </div>

  <div id="penaltyPoints" style="margin-top:5px; font-size:14px; color:#666;">Strafpunkte: 0</div>

  <script>
    // Data for verbs with prepositions
    // Each verb has a probability weight for random selection
        const data = [
      // Akkusativ
      { verb: "achten", correct: "auf", case: "Akkusativ", probability: 4, translations: { ru: "–æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ", en: "to pay attention", ua: "–∑–≤–µ—Ä—Ç–∞—Ç–∏ —É–≤–∞–≥—É" } },
      { verb: "antworten", correct: "auf", case: "Akkusativ", probability: 4, translations: { ru: "–æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞", en: "to answer to", ua: "–≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞" } },
      { verb: "sich √§rgern", correct: "√ºber", case: "Akkusativ", probability: 4, translations: { ru: "–∑–ª–∏—Ç—å—Å—è –Ω–∞", en: "to be annoyed about", ua: "–∑–ª–∏—Ç–∏—Å—è –Ω–∞" } },
      { verb: "sich aufregen", correct: "√ºber", case: "Akkusativ", probability: 4, translations: { ru: "–≤–æ–ª–Ω–æ–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞", en: "to get upset about", ua: "—Ö–≤–∏–ª—é–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑" } },
      { verb: "sich beschweren", correct: "√ºber", case: "Akkusativ", probability: 4, translations: { ru: "–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞", en: "to complain about", ua: "—Å–∫–∞—Ä–∂–∏—Ç–∏—Å—è –Ω–∞" } },
      { verb: "bitten", correct: "um", case: "Akkusativ", probability: 4, translations: { ru: "–ø—Ä–æ—Å–∏—Ç—å –æ", en: "to ask for", ua: "–ø—Ä–æ—Å–∏—Ç–∏ –ø—Ä–æ" } },
      { verb: "denken", correct: "an", case: "Akkusativ", probability: 4, translations: { ru: "–¥—É–º–∞—Ç—å –æ", en: "to think about", ua: "–¥—É–º–∞—Ç–∏ –ø—Ä–æ" } },
      { verb: "sich eignen", correct: "f√ºr", case: "Akkusativ", probability: 4, translations: { ru: "–ø–æ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è", en: "to be suitable for", ua: "–ø—ñ–¥—Ö–æ–¥–∏—Ç–∏ –¥–ª—è" } },
      { verb: "sich entschuldigen", correct: "f√ºr", case: "Akkusativ", probability: 4, translations: { ru: "–∏–∑–≤–∏–Ω—è—Ç—å—Å—è –∑–∞", en: "to apologize for", ua: "–≤–∏–±–∞—á–∞—Ç–∏—Å—è –∑–∞" } },
      { verb: "sich erinnern", correct: "an", case: "Akkusativ", probability: 4, translations: { ru: "–≤—Å–ø–æ–º–∏–Ω–∞—Ç—å –æ", en: "to remember", ua: "–ø–∞–º‚Äô—è—Ç–∞—Ç–∏ –ø—Ä–æ" } },
      { verb: "sich freuen", correct: "auf", case: "Akkusativ", probability: 4, translations: { ru: "—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è (–ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º—É)", en: "to look forward to", ua: "—Ä–∞–¥—ñ—Ç–∏ (–º–∞–π–±—É—Ç–Ω—å–æ–º—É)" } },
      { verb: "sich gew√∂hnen", correct: "an", case: "Akkusativ", probability: 4, translations: { ru: "–ø—Ä–∏–≤—ã–∫–∞—Ç—å –∫", en: "to get used to", ua: "–∑–≤–∏–∫–∞—Ç–∏ –¥–æ" } },
      { verb: "sich interessieren", correct: "f√ºr", case: "Akkusativ", probability: 4, translations: { ru: "–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å—Å—è", en: "to be interested in", ua: "—Ü—ñ–∫–∞–≤–∏—Ç–∏—Å—è" } },
      { verb: "sich konzentrieren", correct: "auf", case: "Akkusativ", probability: 4, translations: { ru: "–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞", en: "to concentrate on", ua: "–∑–æ—Å–µ—Ä–µ–¥–∂—É–≤–∞—Ç–∏—Å—è –Ω–∞" } },
      { verb: "sich k√ºmmern", correct: "um", case: "Akkusativ", probability: 4, translations: { ru: "–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ", en: "to take care of", ua: "–¥–±–∞—Ç–∏ –ø—Ä–æ" } },
      { verb: "reden", correct: "√ºber", case: "Akkusativ", probability: 4, translations: { ru: "–≥–æ–≤–æ—Ä–∏—Ç—å –æ", en: "to talk about", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ" } },
      { verb: "sorgen", correct: "f√ºr", case: "Akkusativ", probability: 4, translations: { ru: "–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ", en: "to care for", ua: "–ø—ñ–∫–ª—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ" } },
      { verb: "sprechen", correct: "√ºber", case: "Akkusativ", probability: 4, translations: { ru: "–≥–æ–≤–æ—Ä–∏—Ç—å –æ", en: "to speak about", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ" } },
      { verb: "sich vorbereiten", correct: "auf", case: "Akkusativ", probability: 4, translations: { ru: "–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫", en: "to prepare for", ua: "–≥–æ—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ" } },
      { verb: "warten", correct: "auf", case: "Akkusativ", probability: 4, translations: { ru: "–∂–¥–∞—Ç—å", en: "to wait for", ua: "—á–µ–∫–∞—Ç–∏" } },
      { verb: "sich wenden", correct: "an", case: "Akkusativ", probability: 4, translations: { ru: "–æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫", en: "to turn to", ua: "–∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—è –¥–æ" } },
      { verb: "sich wundern", correct: "√ºber", case: "Akkusativ", probability: 4, translations: { ru: "—É–¥–∏–≤–ª—è—Ç—å—Å—è", en: "to be surprised about", ua: "–¥–∏–≤—É–≤–∞—Ç–∏—Å—è" } },

      // Dativ
      { verb: "abh√§ngen", correct: "von", case: "Dativ", probability: 4, translations: { ru: "–∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç", en: "to depend on", ua: "–∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥" } },
      { verb: "sich bedanken", correct: "bei", case: "Dativ", probability: 4, translations: { ru: "–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –∫–æ–≥–æ-—Ç–æ", en: "to thank someone", ua: "–¥—è–∫—É–≤–∞—Ç–∏ –∫–æ–º—É—Å—å" } },
      { verb: "berichten", correct: "von", case: "Dativ", probability: 4, translations: { ru: "–¥–æ–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ", en: "to report on", ua: "–¥–æ–ø–æ–≤—ñ–¥–∞—Ç–∏ –ø—Ä–æ" } },
      { verb: "sich besch√§ftigen", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "–∑–∞–Ω–∏–º–∞—Ç—å—Å—è —á–µ–º-—Ç–æ", en: "to be busy with", ua: "–∑–∞–π–º–∞—Ç–∏—Å—è —á–∏–º–æ—Å—å" } },
      { verb: "chatten", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å—Å—è —Å", en: "to chat with", ua: "—Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑" } },
      { verb: "diskutieren", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "–¥–∏—Å–∫—É—Ç–∏—Ä–æ–≤–∞—Ç—å —Å", en: "to discuss with", ua: "–¥–∏—Å–∫—É—Ç—É–≤–∞—Ç–∏ –∑" } },
      { verb: "einladen", correct: "zu", case: "Dativ", probability: 4, translations: { ru: "–ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –Ω–∞", en: "to invite to", ua: "–∑–∞–ø—Ä–æ—à—É–≤–∞—Ç–∏ –Ω–∞" } },
      { verb: "sich entschuldigen", correct: "bei", case: "Dativ", probability: 4, translations: { ru: "–∏–∑–≤–∏–Ω—è—Ç—å—Å—è –ø–µ—Ä–µ–¥", en: "to apologize to", ua: "–≤–∏–±–∞—á–∞—Ç–∏—Å—è –ø–µ—Ä–µ–¥" } },
      { verb: "erz√§hlen", correct: "von", case: "Dativ", probability: 4, translations: { ru: "—Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ", en: "to tell about", ua: "—Ä–æ–∑–ø–æ–≤—ñ–¥–∞—Ç–∏ –ø—Ä–æ" } },
      { verb: "geh√∂ren", correct: "zu", case: "Dativ", probability: 4, translations: { ru: "–ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –∫", en: "to belong to", ua: "–Ω–∞–ª–µ–∂–∞—Ç–∏ –¥–æ" } },
      { verb: "leiden", correct: "unter", case: "Dativ", probability: 4, translations: { ru: "—Å—Ç—Ä–∞–¥–∞—Ç—å –æ—Ç", en: "to suffer from", ua: "—Å—Ç—Ä–∞–∂–¥–∞—Ç–∏ –≤—ñ–¥" } },
      { verb: "reden", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Å", en: "to talk with", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –∑" } },
      { verb: "sprechen", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "–≥–æ–≤–æ—Ä–∏—Ç—å —Å", en: "to speak with", ua: "–≥–æ–≤–æ—Ä–∏—Ç–∏ –∑" } },
      { verb: "streiten", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "—Å–ø–æ—Ä–∏—Ç—å —Å", en: "to argue with", ua: "—Å–≤–∞—Ä–∏—Ç–∏—Å—è –∑" } },
      { verb: "teilnehmen", correct: "an", case: "Dativ", probability: 4, translations: { ru: "—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤", en: "to participate in", ua: "–±—Ä–∞—Ç–∏ —É—á–∞—Å—Ç—å —É" } },
      { verb: "telefonieren", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É —Å", en: "to call", ua: "—Ç–µ–ª–µ—Ñ–æ–Ω—É–≤–∞—Ç–∏ –∑" } },
      { verb: "tr√§umen", correct: "von", case: "Dativ", probability: 4, translations: { ru: "–º–µ—á—Ç–∞—Ç—å –æ", en: "to dream of", ua: "–º—Ä—ñ—è—Ç–∏ –ø—Ä–æ" } },
      { verb: "sich treffen", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "–≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è —Å", en: "to meet with", ua: "–∑—É—Å—Ç—Ä—ñ—á–∞—Ç–∏—Å—è –∑" } },
      { verb: "sich unterhalten", correct: "mit", case: "Dativ", probability: 4, translations: { ru: "–±–µ—Å–µ–¥–æ–≤–∞—Ç—å —Å", en: "to have a conversation with", ua: "—Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑" } }
    ];

    const prepositions = ["an", "auf", "bei", "f√ºr", "in", "mit", "√ºber", "unter", "um", "von", "zu"];

    let currentLang = "en";
    let currentCorrect = "";
    let currentIndex = null;

    const nextButtonText = {
      ru: "‚û°Ô∏è –°–ª–µ–¥—É—é—â–∏–π",
      en: "‚û°Ô∏è Next",
      ua: "‚û°Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∏–π"
    };

    const resultText = {
      ru: { correct: "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!", wrong: "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:" },
      en: { correct: "‚úÖ Correct!", wrong: "‚ùå Wrong! Correct answer:" },
      ua: { correct: "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!", wrong: "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:" }
    };

    function setLanguage(lang) {
      currentLang = lang;
      newQuestion();
    }

    function formatVerb(verb) {
      if (verb.startsWith("sich ")) {
        const parts = verb.split(" ");
        return `<span class="sich">${parts[0]}</span> ${parts[1]}`;
      }
      return verb;
    }

    function getWeightedRandomIndex() {
      const pool = [];
      data.forEach((item, index) => {
        for (let i = 0; i < item.probability; i++) {
          pool.push(index);
        }
      });
      return pool[Math.floor(Math.random() * pool.length)];
    }

    function newQuestion() {
      currentIndex = getWeightedRandomIndex();
      const item = data[currentIndex];
      const { verb, correct, translations, case: grammarCase } = item;

      currentCorrect = correct;
      document.getElementById("translation").innerHTML = `${translations[currentLang]} <span style="color:#999; font-size:16px;">(${grammarCase})</span>`;
      document.getElementById("verb").innerHTML = formatVerb(verb);
      document.getElementById("result").textContent = "";
      document.getElementById("nextButton").style.display = "none";
      document.getElementById("nextButton").textContent = nextButtonText[currentLang];

      const container = document.getElementById("options");
      container.innerHTML = "";

      prepositions.forEach((prep) => {
        const btn = document.createElement("button");
        btn.textContent = prep;
        btn.onclick = () => handleAnswer(prep);
        container.appendChild(btn);
      });
    }

    function handleAnswer(selected) {
      const container = document.getElementById("options");
      container.innerHTML = "";
      const result = document.getElementById("result");
      const correct = currentCorrect;
      const item = data[currentIndex];

      if (selected === correct) {
        result.textContent = resultText[currentLang].correct;
        if (item.probability > 1) item.probability -= 1;
      } else {
        result.innerHTML = `${resultText[currentLang].wrong} <span class="correct-answer">${correct}</span>`;
        if (item.probability < 18) item.probability += 3;
      }

      document.getElementById("verb").innerHTML = formatVerb(item.verb) + ` ${item.correct}`;
      document.getElementById("nextButton").style.display = "inline-block";
      updateProgress();
    }

    function updateProgress() {
        const total = data.length;
        const mastered = data.filter(item => item.probability === 1).length;
        const percent = Math.floor((mastered / total) * 100);
        document.getElementById("progressText").textContent = `üìä Progress: ${percent}%`;
        document.getElementById("progressFill").style.width = `${percent}%`;

        const totalPenalty = data.reduce((sum, item) => sum + (item.probability - 1), 0);
        const currentItem = data[currentIndex];
        const currentPenalty = currentItem ? currentItem.probability - 1 : 0;
        const currentVerb = currentItem ? currentItem.verb : "";

        document.getElementById("penaltyPoints").textContent =
            `${currentVerb} >>> Strafpunkte: ${currentPenalty} / Total Strafpunkte: ${totalPenalty}`;

        if (percent === 100) {
            document.getElementById("congratsModal").style.display = "flex";
        }
    }

    function restartTest() {
        data.forEach(item => item.probability = 4);
        document.getElementById("congratsModal").style.display = "none";
        updateProgress();
        newQuestion();
    }

    newQuestion();
    updateProgress();
  </script>

</body>
</html>
